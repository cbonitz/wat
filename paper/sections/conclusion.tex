\section{Conclusion}\seclabel{Conclusion}
This paper identified inadequacies in existing formalisms that are used to
reason about the causes of events in distributed systems. Causality
overapproximates the true cause of an event, and data provenance is restricted
to the domain of static relational databases.  We then presented
\watprovenance{}: a novel form of provenance that generalizes \whyprovenance{}
and refines causality. \Watprovenance{} formalizes precisely why a particular
state machine produces a particular output with respect to a previously
executed trace of inputs. We then discussed how to sidestep the complexity of
automatic \watprovenance{} extraction with \watprovenance{} specifications,
which we found to be simple to write in practice due to the fact that most
distributed systems components have simple interfaces. We implemented our
theoretical findings in a system called \fluent{} and found it to produce
lineage that is orders of magnitude more succinct than existing tools targeted
at debugging distributed systems.

\begin{acks}
  We thank Lennart Oldenburg, Sanjay Krishnan, Alvin Cheung, and Anthony Tan
  for fruitful discussion and feedback. We also thank our shepherd, Ken Yocum,
  for his helpful insights and guidance.
  %
  This research is supported in part by DHS Award HSHQDC-16-3-00083, NSF CISE
  Expeditions Award CCF-1139158, and gifts from Alibaba, Amazon Web Services, Ant
  Financial, CapitalOne, Ericsson, GE, Google, Huawei, Intel, IBM, Microsoft,
  Scotiabank, Splunk and VMware.
\end{acks}
